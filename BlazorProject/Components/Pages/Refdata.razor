@page "/refdata"
@rendermode InteractiveServer
@inject IRefDataService refData

<PageTitle>Data Management</PageTitle>

<h3>Data Management</h3>

@if (currentView == "contexts")
{
    <Contexts OnClick="HandleContextClick" />
}
else if (currentView == "categories")
{
    <Categories ContextKey="@selectedContextKey" OnClick="HandleCategoryKey" />
}
else if (currentView == "value")
{
    <Value CategoryKey="@selectedCategoryKey" ContextKey="@selectedContextKey" />
}

@if (currentView != "contexts")
{
    <button @onclick="GoBack">Go Back</button>
}

@code {
    private string currentView = "contexts";
    private string? selectedContextKey;
    private string? selectedCategoryKey;

    private void HandleContextClick(string? contextKey)
    {
        selectedContextKey = contextKey;
        currentView = "categories";
    }

    private void HandleCategoryKey(string? categoryKey)
    {
        selectedCategoryKey = categoryKey;
        currentView = "value";
    }

    private void GoBack()
    {
        if (currentView == "value")
        {
            currentView = "categories";
        }
        else if (currentView == "categories")
        {
            currentView = "contexts";
        }
    }
}
